<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Simon Dice</title>
    <LINK REL=StyleSheet HREF="estilo.css" TYPE="text/css" MEDIA=screen> 
  </head>
  <body>
    <div class="gameboard">
      <div id="celeste" class="color celeste left" data-color="celeste"></div>
      <div id="violeta" class="color violeta right" data-color="violeta"></div>
      <div id="naranja" class="color naranja left" data-color="naranja"></div>
      <div id="verde" class="color verde right" data-color="verde"></div>
      <button id="btnEmpezar" class="btn-start" onclick="empezarJuego()">Empezar a jugar!</button>
    </div>
    <script>

    const celeste = document.getElementById('celeste')
    const violeta = document.getElementById('violeta')
    const naranja = document.getElementById('naranja')
    const verde = document.getElementById('verde')
    const btnEmpezar = document.getElementById('btnEmpezar')

    class Juego{

      constructor(){

        this.iniciar()
        this.generarSecuencia()
        this.siguienteNivel()

      }

      iniciar(){

        btnEmpezar.classList.add('hide')
        this.nivel = 1
        this.colores = {

          //si lleva el mismo nombre, js por si solo asigna los valores sin tener que hacer por ejemplo: celeste: celeste
          celeste,
          violeta,
          naranja,
          verde

        }

      }

        siguienteNivel(){

          this.iluminarSecuencia()

        }

        numToColor(num){

          switch(num){

            case 0:
              return 'celeste'
            case 1:
              return 'violeta'
            case 2:
              return 'naranja'
            case 3:
              return 'verde'

          }

        }

        iluminarSecuencia(){

          for (let i = 0; i < this.nivel; i++) {

          
            let color = this.numToColor(this.secuencia[i])
            setTimeout( () => this.iluminarColor(color), 1000 * i)

          };

        }

        iluminarColor(color){

          //Iluminamos los colores usando los valores que contienen el llamado a los div de los colores
          this.colores[color].classList.add('light')
          //Apagar la ilumincion (el light) cierta cantidad de tiempo
          setTimeout( () => this.apagarColor(color),350 )

        }

        apagarColor(color){

          this.colores[color].classList.remove('light')

        }

        generarSecuencia(){

        //llamar a la funcion fill xq luego queremos llamar a la funcion map y el map no va a funcionnar cuando tengamos elementos q no estan definidos
        // dentro de un array, al menos debe tener el valor 0. n es 0. math.random retorna un valor entre 0 y 1 y al multiplicarlo * 4 obtendremos un valor entre
        // 0 y 4 pero nunca llegara a ser 4. Math.floor redondeo el numero hacia abajo
        this.secuencia = new Array(10).fill(0).map(n => Math.floor( (Math.random() * 4 ) ) )

        }


    }


    function empezarJuego(){

      var juego = new Juego()

    }

    </script>
  </body>
</html>